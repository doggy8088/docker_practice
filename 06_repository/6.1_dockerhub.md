## 6.1 Docker Hub

本節涵蓋了相關內容與詳細描述，主要探討以下幾個方面：

### 6.1.1 什麼是 Docker Hub

Docker Hub 是 Docker 的中央映象倉庫，透過它您可以輕鬆地分享和獲取 Docker 映象。


[Docker Hub](https://hub.docker.com/) 是 Docker 官方維護的公共映象倉庫，也是全球最大的容器映象函式庫。

它提供了：

- **官方映象**：由 Docker 官方和軟體廠商 (如 Nginx，MySQL，Node.js) 維護的高質量映象。
- **個人/組織倉庫**：使用者可以上傳自己的映象。
- **自動建立**：與 GitHub/Bitbucket 整合 (需付費)。
- **Webhooks**：映象更新時觸發回呼。

---

### 6.1.2 核心功能

本節涵蓋了相關內容與詳細描述，主要探討以下幾個方面：

#### 1. 搜尋映象

我們可以透過 `docker search` 指令來查詢官方倉庫中的映象，並利用 `docker pull` 指令來將它下載到本地。


除了網頁搜尋，也可以使用指令行：

```bash
$ docker search centos
NAME      DESCRIPTION                      STARS     OFFICIAL
centos    The official build of CentOS.    7000+     [OK]
```

> **技巧**：始終優先使用 `OFFICIAL` 標記為 `[OK]` 的映象，安全性更有保障。

#### 2. 拉取映象

執行以下指令：

```bash
$ docker pull nginx:alpine
```

#### 3. 推送映象

需要先登入：

```bash
$ docker login
## 輸入使用者名和密碼

...
```

打標籤並推送：

```bash
## 1. 標記映象

$ docker tag myapp:v1 username/myapp:v1

## 2. 推送

$ docker push username/myapp:v1
```

---

### 6.1.3 限制與配額

本節涵蓋了相關內容與詳細描述，主要探討以下幾個方面：

#### 概述

總體概述了以下內容。

#### 映象拉取限制

自 2020 年 11 月起，Docker Hub 對匿名和免費使用者實施了拉取速率限制：

| 使用者型別 | 限制 |
|---------|------|
| **匿名使用者** (未登入) | 每 6 小時 100 次請求 |
| **免費賬戶** (已登入) | 每 6 小時 200 次請求 |
| **Pro/Team 賬戶** | 無限制 |

> **提示**：如果在 CI/CD 環境中遇到 `toomanyrequests` 錯誤，建議：
> 1. 在 CI 中設定 `docker login`
> 2. 使用國內映象加速器
> 3. 搭建私有倉庫代理

---

### 6.1.4 安全最佳實踐

本節涵蓋了相關內容與詳細描述，主要探討以下幾個方面：

#### 1. 啟用 2FA (雙因素認證)

為了保護您的 Docker Hub 賬號安全，我們建議採取以下措施。


在 Account Settings -> Security 中啟用 2FA，保護賬號安全。啟用後，CLI 登入需要使用 **Access Token** 而非密碼。

#### 2. 使用 Access Token

不要在指令碼或 CI/CD 中直接使用登入密碼。

1. 在 Docker Hub -> Account Settings -> Security -> Access Tokens 建立 Token。
2. 使用 Token 作為密碼登入：

```bash
$ docker login -u username -p dckr_pat_xxxxxxx
```

#### 3. 關注映象漏洞

Docker Hub 會對官方映象和付費使用者的映象進行安全掃描。在映象標籤頁可以看到漏洞掃描結果。

---

### 6.1.5 Webhooks

當映象被推送時，可以自動觸發 HTTP 回呼 (例如通知 CI 系統部署)。

**設定方法**：
倉庫頁面 -> Webhooks -> Create Webhook。

---

### 6.1.6 自動建立

> ⚠️ 目前僅限付費使用者 (Pro/Team) 使用。

連結 GitHub/Bitbucket 倉庫後，當代碼有送出或打標籤時，Docker Hub 會自動執行建立。這保證了映象總是與程式碼同步，且由可信的官方環境建立。

---
