# Docker 容器

映象（`Image`）和容器（`Container`）的關係，就像是物件導向程式設計中的 `類` 和 `實例` 一樣，映象是靜態的定義，容器是映象執行時的實體。容器可以被建立、啟動、停止、刪除、暫停等。

容器的實質是程序，但與直接在宿主執行的程序不同，容器程序執行於屬於自己的獨立的 [命名空間](https://en.wikipedia.org/wiki/Linux_namespaces)。因此容器可以擁有自己的 `root` 檔案系統、自己的網路設定、自己的程序空間，甚至自己的使用者 ID 空間。容器內的程序是執行在一個隔離的環境裡，使用起來，就好像是在一個獨立於宿主的系統下操作一樣。這種屬性使得容器封裝的應用比直接在宿主執行更加安全。也因為這種隔離的屬性，很多人初學 Docker 時常常會混淆容器和虛擬機。

前面講過映象使用的是分層儲存，容器也是如此。每一個容器執行時，是以映象為基礎層，在其上建立一個當前容器的儲存層，我們可以稱這個為容器執行時讀寫而準備的儲存層為 **容器儲存層**。

容器儲存層的生存週期和容器一樣，容器消亡時，容器儲存層也隨之消亡。因此，任何儲存於容器儲存層的訊息都會隨容器刪除而丟失。

按照 Docker 最佳實踐的要求，容器不應該向其儲存層內寫入任何資料，容器儲存層要保持無狀態化。所有的檔案寫入操作，都應該使用 [資料卷（Volume）](../data_management/volume.md)、或者 [繫結宿主目錄](../data_management/bind-mounts.md)，在這些位置的讀寫會跳過容器儲存層，直接對宿主（或網路儲存）發生讀寫，其效能和穩定性更高。

資料卷的生存週期獨立於容器，容器消亡，資料卷不會消亡。因此，使用資料卷後，容器刪除或者重新執行之後，資料卻不會丟失。
