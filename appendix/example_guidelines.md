# 附錄八：本書範例規範與寫作公約

為了保證本書在漫長的技術迭代中保持高質量、高安全性以及良好的可讀性，我們確立了以下專案寫作規範。所有的修改與貢獻都必須遵循這些原則。

## 1. 安全與憑據處理

任何範例文件中都**嚴禁出現將憑據以明文形式直接傳遞給指令引數**的做法。

* **錯誤範例**：`docker login -u myuser -p mysecretpassword` (這會導致密碼洩露到歷史記錄及程序清單中)
* **正確範例（互動式）**：推薦讀者直接使用 `docker login` (優先使用官方 Device Code Flow)。
* **正確範例（自動化）**：使用標準輸入流傳遞 Token：`echo $PAT | docker login -u myuser --password-stdin`

## 2. 失敗模式與前置條件說明

許多現代 Docker 功能 (如 Buildx, SBOM, Kubernetes CRI 整合) 均需要特定的後端儲存或者元件支援。在介紹這些進階指令時，必須：

* **明確宣告前置條件**：例如，『此功能需要開啟 containerd image store』 或 『需要額外設定 `--push`』。
* **描述失敗現象**：明確告訴讀者，『如果你不這麼設定，指令仍會提示成功，但產物將不可見/被丟棄』。

## 3. 統一使用 "docker compose" 指令

早期 Python 編寫的 `docker-compose` (V1) 已停止支援。

* **全書統一標準**：所有的編排指令必須書寫為 `docker compose` (帶空格的 V2 CLI 外掛版)。
* 不得在新的文件和案例中提及或使用舊版格式，除非是為了特意說明 V1 到 V2 的遷移。

## 4. 可復現性目標 (以可重建為目標)

本書中的所有實戰和案例 (尤其 OS 與 DevOps 章節) 應儘量給出『最小可復現實驗環境』。

* 提供明確的基礎映象版本要求 (不要盲目依賴 `latest`)。
* 明確宿主機的生命週期視窗（例如明確注出 Ubuntu 20.04 的支援結束時間）。

## 5. Markdown 格式紀律

我們使用自動化的格式檢查工具 (`check_project_rules.py`) 進行 Lint。以下是必須遵守的排版底線：

* **加粗與空格**：加粗符號內不得有空格（`**錯誤 黑體**` ❌， `**正確黑體**` ✅）。
* **標題間距**：標題後必須跟恰好一個空行。
* **中文標點**：正文敘述部分的引號必須使用中文彎引號 `『』`，不得使用英文直引號 `""`（除了程式碼區塊或 Mermaid 圖表中）。
* **層級與橋接**：禁止跳躍級別使用標題 (如 H2 後直接接 H4)；且帶有子標題的章節，在進入第一個子標題前，必須要有引導/轉場段落介紹該節內容。
